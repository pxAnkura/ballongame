<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>GameEvents</name>
    <events>
        <variable comment="1 if lightning is showing" constant="0" name="isLightning" sid="4289828745713839" static="0" type="number">0</variable>
        <variable comment="Time at the start of the layout" constant="0" name="startTime" sid="7394799688424866" static="0" type="number">0</variable>
        <variable comment="Number of monsters &apos;expunged&apos;" constant="0" name="kills" sid="6078330227782198" static="0" type="number">0</variable>
        <variable comment="Player health" constant="0" name="health" sid="9969638192004059" static="0" type="number">200</variable>
        <variable comment="Angle for the swirl effect on death." constant="0" name="swirlangle" sid="2330291550638748" static="0" type="number">0</variable>
        <variable comment="1 if fading out after death." constant="0" name="fadingout" sid="3160784316835556" static="0" type="number">0</variable>
        <event-group description="Start of layout and every tick updates." sid="2512503019299159" title="General control">
            <sub-events>
                <comment>Start of layout initialisation.  Pinning objects, set cursor, set up the rain loop, load the web font, disable the layout effects, and set the layer transitions.</comment>
                <event-block sid="553480659033818">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="1873153435128583" type="System" />
                    </conditions>
                    <actions>
                        <action behavior="Pin" id="0" name="Pin to object" sid="6367058327393788" type="PlayerGun">
                            <param id="0" name="Pin to">Player</param>
                            <param id="1" name="Mode">0</param>
                        </action>
                        <action id="1" name="Set cursor from sprite" sid="7771145570720302" type="Mouse">
                            <param id="0" name="Sprite">MouseImage</param>
                        </action>
                        <action id="-9" name="Set value" sid="2800374949833589" type="System">
                            <param id="0" name="Variable">startTime</param>
                            <param id="1" name="Value">time</param>
                        </action>
                        <action id="5" name="Set web font" sid="1005043520738726" type="KillsText">
                            <param id="0" name="Family name">&quot;Revalia&quot;</param>
                            <param id="1" name="CSS URL">&quot;http://fonts.googleapis.com/css?family=Revalia&quot;</param>
                        </action>
                        <action id="5" name="Set web font" sid="7159537905096738" type="HealthText">
                            <param id="0" name="Family name">&quot;Revalia&quot;</param>
                            <param id="1" name="CSS URL">&quot;http://fonts.googleapis.com/css?family=Revalia&quot;</param>
                        </action>
                        <action id="-29" name="Set layout effect enabled" sid="9765100487221592" type="System">
                            <param id="0" name="Mode">0</param>
                            <param id="1" name="Effect">&quot;RadialBlur&quot;</param>
                        </action>
                        <action id="-29" name="Set layout effect enabled" sid="6016382207571155" type="System">
                            <param id="0" name="Mode">0</param>
                            <param id="1" name="Effect">&quot;Tint&quot;</param>
                        </action>
                        <action id="-29" name="Set layout effect enabled" sid="1059487692698882" type="System">
                            <param id="0" name="Mode">0</param>
                            <param id="1" name="Effect">&quot;Swirl&quot;</param>
                        </action>
                        <action id="-4" name="Set layer visible" sid="5725884198275642" type="System">
                            <param id="0" name="Layer">&quot;Transition&quot;</param>
                            <param id="1" name="Visibility">1</param>
                        </action>
                        <action id="-4" name="Set layer visible" sid="4695298202435997" type="System">
                            <param id="0" name="Layer">&quot;TransitionOut&quot;</param>
                            <param id="1" name="Visibility">0</param>
                        </action>
                        <action id="-18" name="Set layer opacity" sid="2348632855811007" type="System">
                            <param id="0" name="Layer">&quot;TransitionOut&quot;</param>
                            <param id="1" name="Opacity">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <comment>Show a warning if WebGL is not supported.</comment>
                        <event-block sid="4318961569119138">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="3578882584327585" type="System">
                                    <param id="0" name="First value">renderer</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Second value">&quot;webgl&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Set text" sid="4292094312835423" type="StatsText2">
                                    <param id="0" name="Text">&quot;No webgl support! Shaders not running, try Firefox or Chrome and updating graphics driver&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Fade in from black and fade in the rain loop sound.</comment>
                <event-block sid="2104260993862818">
                    <conditions>
                        <condition id="-7" name="Compare time" sid="2844648165881576" type="System">
                            <param id="0" name="Comparison">2</param>
                            <param id="1" name="Time (seconds)">startTime + 2</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="3" name="Set volume" sid="4737210957523897" type="Audio">
                            <param id="0" name="Tag">&quot;rain&quot;</param>
                            <param id="1" name="dB">lerp(-30, -5, (time - startTime) / 2)</param>
                        </action>
                        <action id="-18" name="Set layer opacity" sid="5588183898130256" type="System">
                            <param id="0" name="Layer">&quot;Transition&quot;</param>
                            <param id="1" name="Opacity">lerp(100, 0, (time - startTime) / 2)</param>
                        </action>
                        <action id="-16" name="Set opacity" sid="3891918068908136" type="HealthText">
                            <param id="0" name="Opacity">(100 - LayerOpacity(&quot;Transition&quot;)) / 2</param>
                        </action>
                        <action id="-16" name="Set opacity" sid="258157245952824" type="KillsText">
                            <param id="0" name="Opacity">(100 - LayerOpacity(&quot;Transition&quot;)) / 2</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="5471153914431109">
                    <conditions>
                        <condition id="-7" name="Compare time" sid="2097957056414154" type="System">
                            <param id="0" name="Comparison">5</param>
                            <param id="1" name="Time (seconds)">startTime + 2</param>
                        </condition>
                        <condition id="-4" name="Trigger once while true" sid="6227778087555002" type="System" />
                    </conditions>
                    <actions>
                        <action disabled="1" id="3" name="Set volume" sid="5541498076441724" type="Audio">
                            <param id="0" name="Tag">&quot;rain&quot;</param>
                            <param id="1" name="dB">-5</param>
                        </action>
                        <action id="-4" name="Set layer visible" sid="4936004695393404" type="System">
                            <param id="0" name="Layer">&quot;Transition&quot;</param>
                            <param id="1" name="Visibility">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Every tick game updates, e.g. UI updates, player looking at the mouse, and updating layer scales.</comment>
                <event-block sid="6532609282776488">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="9837998753183401" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="1263415475482816" type="StatsText1">
                            <param id="0" name="Text">fps &amp; &quot; FPS - &quot; &amp; objectcount &amp; &quot; objects - &quot; &amp; renderer &amp; &quot; renderer&quot;</param>
                        </action>
                        <action id="0" name="Set text" sid="34513973426702" type="KillsText">
                            <param id="0" name="Text">kills &amp; &quot; EXPUNGED&quot;</param>
                        </action>
                        <action id="0" name="Set text" sid="853478059121806" type="HealthText">
                            <param id="0" name="Text">round(max(health, 0)) &amp; &quot;% LIFE&quot;</param>
                        </action>
                        <action id="-10" name="Set value" sid="7078022143758722" type="MouseSprite">
                            <param id="0" name="Instance variable">mangle</param>
                            <param id="1" name="Value">angle(Player.X, Player.Y, Mouse.X(&quot;Game&quot;), Mouse.Y(&quot;Game&quot;))</param>
                        </action>
                        <action id="-10" name="Set value" sid="3362933998260853" type="MouseSprite">
                            <param id="0" name="Instance variable">mdistance</param>
                            <param id="1" name="Value">clamp(distance(Player.X, Player.Y, Mouse.X(&quot;Game&quot;), Mouse.Y(&quot;Game&quot;)), 110, 600)</param>
                        </action>
                        <action id="-3" name="Set position" sid="6920348122296594" type="MouseSprite">
                            <param id="0" name="X">Player.X + cos(MouseSprite.mangle) * MouseSprite.mdistance</param>
                            <param id="1" name="Y">Player.Y + sin(MouseSprite.mangle) * MouseSprite.mdistance</param>
                        </action>
                        <action id="-7" name="Scroll to position" sid="8726659376106388" type="System">
                            <param id="0" name="X">(Player.X + MouseSprite.X) / 2</param>
                            <param id="1" name="Y">(Player.Y + MouseSprite.Y) / 2</param>
                        </action>
                        <action id="-8" name="Set angle" sid="823305732366335" type="Player">
                            <param id="0" name="Angle">MouseSprite.mangle</param>
                        </action>
                        <action id="-17" name="Set layer scale" sid="4843636158332067" type="System">
                            <param id="0" name="Layer">&quot;Game&quot;</param>
                            <param id="1" name="Scale">1.4 - MouseSprite.mdistance / 1200</param>
                        </action>
                        <action disabled="1" id="-17" name="Set layer scale" sid="773720281414186" type="System">
                            <param id="0" name="Layer">&quot;CloudShadows&quot;</param>
                            <param id="1" name="Scale">LayerScale(&quot;Game&quot;)</param>
                        </action>
                        <action disabled="1" id="-17" name="Set layer scale" sid="4413121210760874" type="System">
                            <param id="0" name="Layer">&quot;TorchLight&quot;</param>
                            <param id="1" name="Scale">LayerScale(&quot;Game&quot;)</param>
                        </action>
                        <action disabled="1" id="-17" name="Set layer scale" sid="6398319294012502" type="System">
                            <param id="0" name="Layer">&quot;RainDrops&quot;</param>
                            <param id="1" name="Scale">LayerScale(&quot;Game&quot;)</param>
                        </action>
                        <action id="-17" name="Set layer scale" sid="9143111891985198" type="System">
                            <param id="0" name="Layer">&quot;Monsters&quot;</param>
                            <param id="1" name="Scale">LayerScale(&quot;Game&quot;)</param>
                        </action>
                        <action disabled="1" id="-17" name="Set layer scale" sid="182729252267225" type="System">
                            <param id="0" name="Layer">&quot;RainSplashes&quot;</param>
                            <param id="1" name="Scale">LayerScale(&quot;Game&quot;)</param>
                        </action>
                        <action disabled="1" id="-17" name="Set layer scale" sid="5044924312111398" type="System">
                            <param id="0" name="Layer">&quot;Bumpmap&quot;</param>
                            <param id="1" name="Scale">LayerScale(&quot;Game&quot;)</param>
                        </action>
                        <action disabled="1" id="-17" name="Set layer scale" sid="9621117398317498" type="System">
                            <param id="0" name="Layer">&quot;Background2&quot;</param>
                            <param id="1" name="Scale">LayerScale(&quot;Game&quot;)</param>
                        </action>
                        <action id="-17" name="Set layer scale" sid="7060631255572556" type="System">
                            <param id="0" name="Layer">&quot;Reflections&quot;</param>
                            <param id="1" name="Scale">LayerScale(&quot;Game&quot;)</param>
                        </action>
                        <action disabled="1" id="-17" name="Set layer scale" sid="930768130871921" type="System">
                            <param id="0" name="Layer">&quot;Background1&quot;</param>
                            <param id="1" name="Scale">LayerScale(&quot;Game&quot;)</param>
                        </action>
                        <action id="-4" name="Set position to another object" sid="614166897239666" type="Laser">
                            <param id="0" name="Object">PlayerGun</param>
                            <param id="1" name="Image point (optional)">1</param>
                        </action>
                        <action id="-8" name="Set angle" sid="9039621373141364" type="Laser">
                            <param id="0" name="Angle">angle(Self.X, Self.Y, MouseSprite.X, MouseSprite.Y)</param>
                        </action>
                        <action id="-5" name="Set width" sid="4020336126992389" type="Laser">
                            <param id="0" name="Width">distance(Self.X, Self.Y, MouseSprite.X, MouseSprite.Y)</param>
                        </action>
                        <action id="-4" name="Set position to another object" sid="7948577633721184" type="LaserImpact">
                            <param id="0" name="Object">MouseSprite</param>
                            <param id="1" name="Image point (optional)">0</param>
                        </action>
                        <action id="-15" name="Set visible" sid="9620610574851316" type="LaserImpact">
                            <param id="0" name="Visibility">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="Shooting the player laser." sid="7989721083156559" title="Player control">
            <sub-events>
                <comment>Use WASD as alternate controls in addition to arrow keys.</comment>
                <event-block sid="5976851442718937">
                    <conditions>
                        <condition id="2" name="Key is down" sid="6137977646587098" type="Keyboard">
                            <param id="0" name="Key">87 (W)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="9330040022191161" type="Player">
                            <param id="0" name="Control">2</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="6370363614949825">
                    <conditions>
                        <condition id="2" name="Key is down" sid="5859771750247273" type="Keyboard">
                            <param id="0" name="Key">65 (A)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="9614418901998386" type="Player">
                            <param id="0" name="Control">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="9803360021011676">
                    <conditions>
                        <condition id="2" name="Key is down" sid="4531727157668281" type="Keyboard">
                            <param id="0" name="Key">83 (S)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="3121388984564043" type="Player">
                            <param id="0" name="Control">3</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8661578087624751">
                    <conditions>
                        <condition id="2" name="Key is down" sid="4236347413425288" type="Keyboard">
                            <param id="0" name="Key">68 (D)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="8Direction" id="7" name="Simulate control" sid="7913101220368015" type="Player">
                            <param id="0" name="Control">1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Shoot the laser if reloaded.  &apos;shooting&apos; lasts for 0.5 seconds, and after 2 seconds the player reloads.</comment>
                <event-block sid="9919421631962905">
                    <conditions>
                        <condition id="2" name="Mouse button is down" sid="7743209563625517" type="Mouse">
                            <param id="0" name="Mouse button">0</param>
                        </condition>
                        <condition id="-8" name="Is boolean instance variable set" sid="7327965084966384" type="Player">
                            <param id="0" name="Instance variable">reloaded</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action disabled="1" id="0" name="Play" sid="6537249437143425" type="Audio">
                            <param id="0" name="Audio file">laser</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">0</param>
                            <param id="1" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="9090854035833388" type="Player">
                            <param id="0" name="Instance variable">shooting</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="7026671798876113" type="Player">
                            <param id="0" name="Instance variable">reloaded</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action id="-16" name="Wait" sid="8433394481248631" type="System">
                            <param id="0" name="Seconds">0.5</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="9032522354843132" type="Player">
                            <param id="0" name="Instance variable">shooting</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action id="-16" name="Wait" sid="8314805329224968" type="System">
                            <param id="0" name="Seconds">1.5</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="1633496643956073" type="Player">
                            <param id="0" name="Instance variable">reloaded</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>While shooting, show the laser impact and leave a trail of LaserGlow sprites.</comment>
                <event-block sid="5899707132279971">
                    <conditions>
                        <condition id="-8" name="Is boolean instance variable set" sid="2658467493631705" type="Player">
                            <param id="0" name="Instance variable">shooting</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-16" name="Set opacity" sid="5374781219126491" type="Laser">
                            <param id="0" name="Opacity">100</param>
                        </action>
                        <action id="-15" name="Set visible" sid="7190015626950546" type="LaserImpact">
                            <param id="0" name="Visibility">1</param>
                        </action>
                        <action id="-8" name="Set angle" sid="8900711727507572" type="LaserImpact">
                            <param id="0" name="Angle">random(360)</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="8702839511193747">
                            <conditions>
                                <condition id="-6" name="Every X seconds" sid="2077704646998048" type="System">
                                    <param id="0" name="Interval (seconds)">0.05</param>
                                </condition>
                            </conditions>
                            <actions />
                        </event-block>
                        <comment>If effects are supported (WebGL renderer), show a trail of splashes if the laser is over a puddle.</comment>
                        <event-block sid="8258273303507602">
                            <conditions>
                                <condition id="-27" name="Effects are supported" sid="6377049875023863" type="System" />
                            </conditions>
                            <actions />
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="2861868553407165">
                    <conditions>
                        <condition id="-22" name="Else" sid="7883850565034706" type="System" />
                        <condition id="-8" name="Is boolean instance variable set" sid="5950551522171101" type="Player">
                            <param id="0" name="Instance variable">reloaded</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-16" name="Set opacity" sid="8539861779563942" type="Laser">
                            <param id="0" name="Opacity">40</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8026288890417313">
                    <conditions>
                        <condition id="-22" name="Else" sid="4794651955027562" type="System" />
                    </conditions>
                    <actions>
                        <action id="-16" name="Set opacity" sid="3383666459858641" type="Laser">
                            <param id="0" name="Opacity">10</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Play the player walking sound effects.  Change to splash sounds if over a puddle.</comment>
                <event-block sid="4002973367634603">
                    <conditions>
                        <condition behavior="8Direction" id="1" name="Compare speed" sid="3804292263098047" type="Player">
                            <param id="0" name="Comparison">5</param>
                            <param id="1" name="Speed">100</param>
                        </condition>
                        <condition id="-6" name="Every X seconds" sid="1050515679184572" type="System">
                            <param id="0" name="Interval (seconds)">0.333</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="4061363478155234">
                            <conditions />
                            <actions>
                                <action disabled="1" id="7" name="Play (by name)" sid="7122357222777497" type="Audio">
                                    <param id="0" name="Folder">0</param>
                                    <param id="1" name="Audio file name">choose(&quot;splash1&quot;, &quot;splash2&quot;, &quot;splash3&quot;, &quot;splash4&quot;)</param>
                                    <param id="3" name="Loop">0</param>
                                    <param id="4" name="Volume">-10</param>
                                    <param id="2" name="Tag (optional)">&quot;step&quot;</param>
                                </action>
                                <action id="3" name="Set volume" sid="5224007828026497" type="Audio">
                                    <param id="0" name="Tag">&quot;step&quot;</param>
                                    <param id="1" name="dB">-10</param>
                                </action>
                            </actions>
                            <sub-events>
                                <comment>Also create a splash if walking through a puddle and effects are supported.</comment>
                                <event-block sid="58625275591299">
                                    <conditions>
                                        <condition id="-27" name="Effects are supported" sid="6872949610229724" type="System" />
                                    </conditions>
                                    <actions />
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="1050363763174946">
                            <conditions>
                                <condition id="-22" name="Else" sid="8970673952883186" type="System" />
                            </conditions>
                            <actions>
                                <action id="7" name="Play (by name)" sid="783357523793564" type="Audio">
                                    <param id="0" name="Folder">0</param>
                                    <param id="1" name="Audio file name">choose(&quot;step1&quot;, &quot;step2&quot;, &quot;step3&quot;, &quot;step4&quot;)</param>
                                    <param id="3" name="Loop">0</param>
                                    <param id="4" name="Volume">-10</param>
                                    <param id="2" name="Tag (optional)">&quot;step&quot;</param>
                                </action>
                                <action id="3" name="Set volume" sid="4779781966171392" type="Audio">
                                    <param id="0" name="Tag">&quot;step&quot;</param>
                                    <param id="1" name="dB">-10</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="Moving and controlling the monsters." sid="3257495135894835" title="Monster control">
            <sub-events>
                <comment>If a monster leaves the layout, point them roughly in the direction of the player.</comment>
                <event-block sid="8589677235678844">
                    <conditions>
                        <condition id="-4" name="Is outside layout" sid="8747112281503631" type="Monster" />
                    </conditions>
                    <actions>
                        <action id="-22" name="Set angle toward position" sid="7133087703630591" type="Monster">
                            <param id="0" name="X">Player.X</param>
                            <param id="1" name="Y">Player.Y</param>
                        </action>
                        <action id="-18" name="Rotate clockwise" sid="4053730713411101" type="Monster">
                            <param id="0" name="Degrees">random(-30, 30)</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Keep the monster opacity updated based on its health.</comment>
                <event-block sid="4233546839456848">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="8885274054816979" type="System" />
                    </conditions>
                    <actions>
                        <action id="-16" name="Set opacity" sid="7268292373862009" type="Monster">
                            <param id="0" name="Opacity">Self.health * 0.7 + 30</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Hurt monsters while they are being shot.</comment>
                <event-block sid="734868704192916">
                    <conditions>
                        <condition id="-8" name="Is boolean instance variable set" sid="6092453404773577" type="Player">
                            <param id="0" name="Instance variable">shooting</param>
                        </condition>
                        <condition id="1" name="Is overlapping another object" sid="5697942449128466" type="MouseSprite">
                            <param id="0" name="Object">Monster</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-12" name="Subtract from" sid="9976598887489665" type="Monster">
                            <param id="0" name="Instance variable">health</param>
                            <param id="1" name="Value">266 * dt</param>
                        </action>
                        <action id="-18" name="Rotate clockwise" sid="9510200068813731" type="Monster">
                            <param id="0" name="Degrees">random(-15, 15)</param>
                        </action>
                    </actions>
                </event-block>
                <comment>If a monster is killed, destroy it and create 2 more monsters off-screen to replace it.</comment>
                <event-block sid="7299004255987686">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="3399874345478928" type="Monster">
                            <param id="0" name="Instance variable">health</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition id="-11" name="For Each" sid="8548896041756652" type="System">
                            <param id="0" name="Object">Monster</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="548044129021001" type="Monster" />
                        <action disabled="1" id="0" name="Play" sid="2496799880337728" type="Audio">
                            <param id="0" name="Audio file">fireball</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">0</param>
                            <param id="1" name="Tag (optional)">&quot;&quot;</param>
                        </action>
                        <action id="-10" name="Add to" sid="9892607175355818" type="System">
                            <param id="0" name="Variable">kills</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="5666425560037874">
                            <conditions>
                                <condition id="-12" name="Repeat" sid="6601011839408777" type="System">
                                    <param id="0" name="Count">2</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="1483924188931921" type="System">
                                    <param id="0" name="Object to create">Monster</param>
                                    <param id="1" name="Layer">&quot;Monsters&quot;</param>
                                    <param id="2" name="X">random(LayoutWidth)</param>
                                    <param id="3" name="Y">random(LayoutHeight)</param>
                                </action>
                            </actions>
                            <sub-events>
                                <comment>Randomly reposition the new monster until it is not on-screen. We don&apos;t want monsters suddenly appearing next to the player.</comment>
                                <event-block sid="1244693003251944">
                                    <conditions>
                                        <condition id="-23" name="While" sid="4902735965152708" type="System" />
                                        <condition id="-3" name="Is on-screen" sid="435438997291163" type="Monster" />
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Set position" sid="2643903595657938" type="Monster">
                                            <param id="0" name="X">random(LayoutWidth)</param>
                                            <param id="1" name="Y">random(LayoutHeight)</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>If a monster is near the player, rotate it so it chases them.</comment>
                <event-block sid="3580107228206203">
                    <conditions>
                        <condition id="-11" name="For Each" sid="2780092040017188" type="System">
                            <param id="0" name="Object">Monster</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="2456014026725587" type="System">
                            <param id="0" name="First value">distance(Monster.X, Monster.Y, Player.X, Player.Y)</param>
                            <param id="1" name="Comparison">2</param>
                            <param id="2" name="Second value">300</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-21" name="Rotate toward position" sid="5760825255726219" type="Monster">
                            <param id="0" name="Degrees">(300 - distance(Monster.X, Monster.Y, Player.X, Player.Y)) * dt</param>
                            <param id="1" name="X">Player.X</param>
                            <param id="2" name="Y">Player.Y</param>
                        </action>
                    </actions>
                </event-block>
                <comment>If the player is touching a monster, increase the &apos;hurting&apos; variable which then reduces their health and shows the hurt effects.</comment>
                <event-block sid="2249492609135074">
                    <conditions>
                        <condition id="1" name="Is overlapping another object" sid="2963770554545117" type="Player">
                            <param id="0" name="Object">Monster</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="9761514454658431" type="Player">
                            <param id="0" name="Instance variable">hurting</param>
                            <param id="1" name="Value">min(Self.hurting + 300* dt, 100)</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="2325518093289721">
                            <conditions>
                                <condition id="-6" name="Every X seconds" sid="4043835229287367" type="System">
                                    <param id="0" name="Interval (seconds)">1.3</param>
                                </condition>
                                <condition id="-14" name="Compare variable" sid="7804932654172825" type="System">
                                    <param id="0" name="Variable">health</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action disabled="1" id="0" name="Play" sid="7561478020325443" type="Audio">
                                    <param id="0" name="Audio file">SFX4</param>
                                    <param id="2" name="Loop">0</param>
                                    <param id="3" name="Volume">0</param>
                                    <param id="1" name="Tag (optional)">&quot;sfx4&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block disabled="1" sid="5080509544769318">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="4903300154530981" type="Monster">
                            <param id="0" name="Object">Monster</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="9172064882097819" type="Player">
                            <param id="0" name="Instance variable">hurting</param>
                            <param id="1" name="Value">max(Self.hurting - 100* dt, 0)</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="6446297671602899">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="5638464613165247" type="System" />
                    </conditions>
                    <actions>
                        <action disabled="1" id="3" name="Set volume" sid="4165907374715723" type="Audio">
                            <param id="0" name="Tag">&quot;sfx4&quot;</param>
                            <param id="1" name="dB">lerp(-40, -10, player.hurting / 100)</param>
                        </action>
                        <action id="-31" name="Set layout effect parameter" sid="4621968440088496" type="System">
                            <param id="0" name="Effect">&quot;RadialBlur&quot;</param>
                            <param id="1" name="Parameter index">0</param>
                            <param id="2" name="Value">(Player.Sine.Value + 60) * (Player.hurting / 100)</param>
                        </action>
                        <action id="-31" name="Set layout effect parameter" sid="4592781025635396" type="System">
                            <param id="0" name="Effect">&quot;Tint&quot;</param>
                            <param id="1" name="Parameter index">1</param>
                            <param id="2" name="Value">100 - (Player.hurting / 200) * (100 - (LayerOpacity(&quot;TransitionOut&quot;)))</param>
                        </action>
                        <action id="-31" name="Set layout effect parameter" sid="8082803034947385" type="System">
                            <param id="0" name="Effect">&quot;Tint&quot;</param>
                            <param id="1" name="Parameter index">2</param>
                            <param id="2" name="Value">100 - (Player.hurting / 200) * (100 - (LayerOpacity(&quot;TransitionOut&quot;)))</param>
                        </action>
                        <action id="-11" name="Subtract from" sid="3783238680005698" type="System">
                            <param id="0" name="Variable">health</param>
                            <param id="1" name="Value">(Player.hurting / 5) * dt</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
